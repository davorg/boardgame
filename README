Trying to rewrite some truely horrible Perl that was used in a Linux Format tutorial.
